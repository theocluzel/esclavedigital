<!DOCTYPE html>
<html>
<head>
    <title>ESCLAVE DIGITAL</title>
    <meta charset="utf-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        #book-container {
            width: 100%;
            height: 800px;
            touch-action: none;
            position: relative;
        }
        canvas {
            touch-action: none;
            display: block;
            width: 100% !important;
            height: 100% !important;
        }
        .glowing-title {
            display: flex;
            justify-content: center;
            gap: 0;
            letter-spacing: normal;
            font-size: 4.5rem;
        }
        .glowing-letter {
            transition: text-shadow 0.3s ease;
            cursor: default;
            margin: 0;
            padding: 0;
            letter-spacing: normal;
        }
        .glowing-letter.active {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8),
                         0 0 20px rgba(255, 255, 255, 0.8),
                         0 0 30px rgba(255, 255, 255, 0.6);
        }
        dialog {
            margin: auto;
            padding: 0;
            border: none;
            background: transparent;
        }
        dialog::backdrop {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(4px);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-[#001428] text-white">
    <!-- Header -->
    <header class="py-4 border-b border-white/10">
        <nav class="container mx-auto px-4 flex justify-between items-center">
            <div class="text-xl font-bold">ESCLAVE DIGITAL</div>
            <div class="space-x-6">
                <a href="/" class="hover:text-cyan-400 transition-colors">Accueil</a>
                <a href="/about.html" class="hover:text-cyan-400 transition-colors">À propos</a>
                <a href="mailto:contact@esclavedigital.fr" class="hover:text-cyan-400 transition-colors">Contact</a>
            </div>
        </nav>
    </header>

    <!-- Contenu principal -->
    <main class="flex-grow">
        <div class="container mx-auto px-4 py-16">
            <div class="max-w-4xl mx-auto text-center space-y-8">
                <h1 class="text-6xl font-bold mb-8 text-white glowing-title" id="mainTitle">
                    <!-- Le JavaScript remplira ce titre -->
                </h1>

                <!-- Container pour le livre 3D -->
                <div id="book-container" class="mb-4"></div>

                <!-- Prix et boutons -->
                <div class="space-y-6">
                    <div class="flex items-center justify-center gap-3">
                        <span class="text-3xl font-bold text-white">4,99€</span>
                        <span class="text-sm text-white/70">TTC</span>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="document.getElementById('format-selection').showModal()" class="bg-gradient-to-r from-cyan-400 to-blue-400 text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition-all">
                            Acheter le livre
                        </button>
                        <button onclick="document.getElementById('formats-lecture').scrollIntoView({behavior: 'smooth'})" class="bg-transparent border-2 border-white text-white hover:bg-white/10 font-bold py-3 px-8 rounded-full transition-all">
                            Comment lire ?
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section En Savoir Plus -->
        <div id="en-savoir-plus" class="bg-white/5 backdrop-blur-sm mt-16 py-20">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto space-y-12">
                    <div class="text-center space-y-4">
                        <h2 class="text-4xl font-bold">ESCLAVE DIGITAL</h2>
                        <h3 class="text-2xl font-semibold text-white/90">VERS UN FUTUR SANS INTELLIGENCE ?</h3>
                        <p class="text-xl italic text-white/80 mt-6">
                            "À l'ère de la technologie omniprésente, êtes-vous maître de votre temps ou esclave de vos écrans ?"
                        </p>
                    </div>

                    <div class="space-y-8 text-lg leading-relaxed">
                        <p>
                            À 17 ans, Théo Cluzel se dresse comme la voix de sa génération, une génération qui, malgré son immersion totale dans le digital, ne voit pas ses dangers. Ce jeune auteur ne se contente pas de raconter l'histoire des écrans et des réseaux sociaux ; il la vit, la respire. Son ambition est de partager leurs impacts avec le monde.
                        </p>
                        
                        <p>
                            Dans ce livre, Theo nous guide a travers les meandres d'un monde ou les notifications dictent nos emotions et ou les algorithmes nous connaissent mieux que nous-mêmes. Il met en lumière les pièges invisibles qui guettent les jeunes et les moins jeunes : addiction, perte de concentration, et déclin du bien-être mental et physique.
                        </p>
                        
                        <p>
                            Mais ce livre n'est pas qu'un avertissement, c'est aussi une lueur d'espoir. Théo propose des solutions concrètes pour reprendre le contrôle de nos vies numériques et restaurer notre santé mentale. Il nous invite à une prise de conscience collective, à agir maintenant pour un avenir où la technologie sert l'homme, et non l'inverse.
                        </p>
                        
                        <blockquote class="border-l-4 border-white/20 pl-6 italic text-white/90">
                            «J'espère que chaque lecteur trouvera des moyens concrets pour proteger son intelligence el son bien-être dans un monde de plus en plus digital. Ensemble, nous pouvons construire un avenir où la technologie est utilisée de manière responsable et bénéfique, sans sacrifier notre santé mentale et physique.»
                        </blockquote>
                        
                        <p class="text-right font-semibold">
                            THÉO CLUZEL
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Formats de Lecture -->
        <div id="formats-lecture" class="mt-16 py-20 bg-white/5">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-12">Comment lire ESCLAVE DIGITAL ?</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Version Web Premium -->
                        <div class="bg-gradient-to-r from-cyan-500/20 to-blue-500/20 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Version Web Premium</h3>
                            <p class="text-white/80">La meilleure expérience de lecture, sur tous vos appareils.</p>
                            <ul class="mt-4 space-y-2 text-sm">
                                <li>• Aucune installation requise</li>
                                <li>• Synchronisation automatique</li>
                                <li>• Lecture hors-ligne possible</li>
                                <li>• Compte personnel sécurisé</li>
                            </ul>
                        </div>

                        <!-- iOS -->
                        <div class="bg-white/10 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">iOS / Apple Books</h3>
                            <p class="text-white/80">Optimisé pour iPhone et iPad.</p>
                            <ul class="mt-4 space-y-2 text-sm">
                                <li>• Installation simple et rapide</li>
                                <li>• Synchronisation iCloud</li>
                                <li>• Marque-pages et annotations</li>
                                <li>• Compatible tous appareils Apple</li>
                            </ul>
                        </div>

                        <!-- Android -->
                        <div class="bg-white/10 p-6 rounded-lg">
                            <h3 class="text-xl font-bold mb-4">Android</h3>
                            <p class="text-white/80">Via Google Play Livres.</p>
                            <ul class="mt-4 space-y-2 text-sm">
                                <li>• Installation automatique</li>
                                <li>• Synchronisation Google</li>
                                <li>• Mode sombre disponible</li>
                                <li>• Compatible tous appareils Android</li>
                            </ul>
                        </div>
                    </div>

                    <div class="mt-12 p-6 bg-white/10 rounded-lg">
                        <h3 class="text-xl font-bold mb-4">Comment acheter ?</h3>
                        <ol class="space-y-4 text-white/80">
                            <li>1. Cliquez sur "Acheter le livre"</li>
                            <li>2. Choisissez votre format de lecture préféré</li>
                            <li>3. Remplissez vos informations (email, nom)</li>
                            <li>4. Procédez au paiement sécurisé par carte bancaire</li>
                            <li>5. Selon votre choix :
                                <ul class="ml-6 mt-2 space-y-2">
                                    <li>• <span class="font-semibold">Version Web</span> : Créez votre compte et accédez immédiatement au livre</li>
                                    <li>• <span class="font-semibold">iOS</span> : Ouvrez le lien reçu par email dans Apple Books</li>
                                    <li>• <span class="font-semibold">Android</span> : Installez Google Play Livres et ouvrez le lien reçu</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de sélection du format -->
        <dialog id="format-selection" class="bg-[#001428] text-white p-8 rounded-xl backdrop-blur-xl border border-white/20 w-full max-w-2xl mx-auto">
            <div class="space-y-6">
                <h2 class="text-2xl font-bold text-center">Choisissez votre format de lecture</h2>
                
                <form id="format-form" class="space-y-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- iOS -->
                        <div class="bg-white/10 p-6 rounded-lg cursor-pointer hover:bg-white/20 transition-all">
                            <input type="radio" name="format" id="ios" value="ios" class="hidden">
                            <label for="ios" class="block cursor-pointer">
                                <h3 class="text-xl font-bold mb-3">iOS / Apple Books</h3>
                                <p class="text-sm text-white/80 mb-4">Format optimisé pour iPhone et iPad</p>
                                <div class="space-y-4">
                                    <div class="bg-white/5 p-3 rounded">
                                        <h4 class="font-bold mb-2">Comment lire ?</h4>
                                        <ol class="text-sm space-y-2 text-white/70">
                                            <li>1. Installez Apple Books (gratuit)</li>
                                            <li>2. Après l'achat, cliquez sur "Ouvrir dans Books"</li>
                                            <li>3. Le livre sera synchronisé sur tous vos appareils Apple</li>
                                        </ol>
                                    </div>
                                    <ul class="text-sm space-y-1 text-white/70">
                                        <li>• Synchronisation iCloud automatique</li>
                                        <li>• Marque-pages et annotations sauvegardés</li>
                                        <li>• Reprise de la lecture sur tous vos appareils</li>
                                    </ul>
                                </div>
                            </label>
                        </div>

                        <!-- Android -->
                        <div class="bg-white/10 p-6 rounded-lg cursor-pointer hover:bg-white/20 transition-all">
                            <input type="radio" name="format" id="android" value="android" class="hidden">
                            <label for="android" class="block cursor-pointer">
                                <h3 class="text-xl font-bold mb-3">Android</h3>
                                <p class="text-sm text-white/80 mb-4">Via Google Play Livres</p>
                                <div class="space-y-4">
                                    <div class="bg-white/5 p-3 rounded">
                                        <h4 class="font-bold mb-2">Comment lire ?</h4>
                                        <ol class="text-sm space-y-2 text-white/70">
                                            <li>1. Installez Google Play Livres (gratuit)</li>
                                            <li>2. Après l'achat, le livre s'ouvrira automatiquement</li>
                                            <li>3. Accessible sur tous vos appareils Android</li>
                                        </ol>
                                    </div>
                                    <ul class="text-sm space-y-1 text-white/70">
                                        <li>• Synchronisation Google automatique</li>
                                        <li>• Mode sombre et personnalisation</li>
                                        <li>• Lecture hors-ligne après téléchargement</li>
                                    </ul>
                                </div>
                            </label>
                        </div>

                        <!-- Version Web -->
                        <div class="md:col-span-2 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 p-6 rounded-lg cursor-pointer hover:from-cyan-500/30 hover:to-blue-500/30 transition-all">
                            <input type="radio" name="format" id="web" value="web" class="hidden">
                            <label for="web" class="block cursor-pointer">
                                <div class="flex items-start gap-4">
                                    <div class="flex-grow">
                                        <h3 class="text-xl font-bold mb-3">Version Web Premium</h3>
                                        <p class="text-sm text-white/80 mb-4">La meilleure expérience de lecture</p>
                                        <div class="space-y-4">
                                            <div class="bg-white/5 p-3 rounded">
                                                <h4 class="font-bold mb-2">Comment ça marche ?</h4>
                                                <ol class="text-sm space-y-2 text-white/70">
                                                    <li>1. Créez votre compte personnel après l'achat</li>
                                                    <li>2. Accédez au livre depuis n'importe quel appareil</li>
                                                    <li>3. Votre progression est automatiquement sauvegardée</li>
                                                </ol>
                                            </div>
                                            <div class="grid grid-cols-2 gap-4">
                                                <div class="bg-white/5 p-3 rounded">
                                                    <h4 class="font-bold mb-2">Avantages</h4>
                                                    <ul class="text-sm space-y-1 text-white/70">
                                                        <li>• Aucune installation requise</li>
                                                        <li>• Mise en page adaptative</li>
                                                        <li>• Mode sombre automatique</li>
                                                        <li>• Mises à jour gratuites</li>
                                                    </ul>
                                                </div>
                                                <div class="bg-white/5 p-3 rounded">
                                                    <h4 class="font-bold mb-2">Fonctionnalités</h4>
                                                    <ul class="text-sm space-y-1 text-white/70">
                                                        <li>• Sauvegarde du progrès</li>
                                                        <li>• Notes et surlignages</li>
                                                        <li>• Mode hors-ligne</li>
                                                        <li>• Support prioritaire</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="hidden md:block">
                                        <span class="bg-gradient-to-r from-cyan-400 to-blue-400 text-[#001428] text-sm font-bold px-3 py-1 rounded-full">
                                            RECOMMANDÉ
                                        </span>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="flex justify-between items-center pt-4 border-t border-white/20">
                        <button type="button" onclick="document.getElementById('format-selection').close()" class="text-white/70 hover:text-white">
                            Annuler
                        </button>
                        <button type="submit" class="bg-white text-[#001428] px-6 py-2 rounded-full font-bold hover:bg-gray-100 transition-all">
                            Continuer
                        </button>
                    </div>
                </form>
            </div>
        </dialog>
    </main>

    <!-- Footer -->
    <footer class="py-8 border-t border-white/10 bg-[#001428]/50">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Liens rapides</h3>
                    <ul class="space-y-2">
                        <li><a href="mentions-legales.html" class="hover:text-cyan-400 transition-colors">Mentions légales</a></li>
                        <li><a href="politique-confidentialite.html" class="hover:text-cyan-400 transition-colors">Politique de confidentialité</a></li>
                        <li><a href="cgv.html" class="hover:text-cyan-400 transition-colors">CGV</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact</h3>
                    <a href="mailto:contact@esclavedigital.fr" class="text-cyan-400 hover:text-cyan-300 transition-colors">
                        contact@esclavedigital.fr
                    </a>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-white/10 text-center text-sm text-white/60">
                © 2024 ESCLAVE DIGITAL. Tous droits réservés.
            </div>
        </div>
    </footer>

    <script>
        // Ajout du code pour le titre scintillant
        const title = "ESCLAVE DIGITAL";
        const mainTitle = document.getElementById('mainTitle');
        
        // Créer les lettres individuelles avec un espace entre les mots
        title.split('').forEach((letter, index) => {
            const span = document.createElement('span');
            span.textContent = letter;
            span.className = 'glowing-letter';
            // Ajouter un style spécial pour l'espace entre les mots
            if (letter === ' ') {
                span.style.marginLeft = '0.15em';
                span.style.marginRight = '0.15em';
            }
            mainTitle.appendChild(span);
        });

        // Gérer les événements de survol
        const letters = document.querySelectorAll('.glowing-letter');
        
        function handleMouseMove(e) {
            letters.forEach(letter => {
                const rect = letter.getBoundingClientRect();
                const distance = Math.hypot(
                    e.clientX - (rect.left + rect.width/2),
                    e.clientY - (rect.top + rect.height/2)
                );
                
                // Activer l'effet si la souris est à moins de 50 pixels
                if (distance < 50) {
                    letter.classList.add('active');
                } else {
                    letter.classList.remove('active');
                }
            });
        }

        // Événements tactiles
        function handleTouch(e) {
            const touch = e.touches[0];
            handleMouseMove(touch);
        }

        mainTitle.addEventListener('mousemove', handleMouseMove);
        mainTitle.addEventListener('mouseleave', () => {
            letters.forEach(letter => letter.classList.remove('active'));
        });
        mainTitle.addEventListener('touchmove', handleTouch);
        mainTitle.addEventListener('touchend', () => {
            letters.forEach(letter => letter.classList.remove('active'));
        });

        document.addEventListener('DOMContentLoaded', function() {
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x001428);

            const container = document.getElementById('book-container');
            const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            
            const renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                powerPreference: "high-performance",
                precision: "highp"
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            container.appendChild(renderer.domElement);

            // Éclairage amélioré
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            // Création des textures
            const textureLoader = new THREE.TextureLoader();
            
            function loadTexture(url) {
                return new Promise((resolve, reject) => {
                    textureLoader.load(
                        url,
                        (texture) => {
                            console.log('Texture chargée avec succès:', url);
                            resolve(texture);
                        },
                        undefined,
                        (error) => {
                            console.error('Erreur lors du chargement de la texture:', url, error);
                            reject(error);
                        }
                    );
                });
            }

            // Création d'une texture temporaire pour le dos
            function createBackTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 2048;  // Augmentation significative de la résolution
                canvas.height = 2048;
                const ctx = canvas.getContext('2d');

                // Activation de l'anticrénelage
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';

                // Fond
                ctx.fillStyle = '#001428';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Configuration du texte
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Titre
                ctx.font = 'bold 96px Arial';
                ctx.fillText('ESCLAVE DIGITAL', canvas.width/2, 240);

                // Sous-titre
                ctx.font = 'bold 72px Arial';
                ctx.fillText('VERS UN FUTUR', canvas.width/2, 360);
                ctx.fillText('SANS INTELLIGENCE ?', canvas.width/2, 440);

                // Texte principal
                ctx.font = '64px Arial';
                const text = [
                    "À 17 ans, Théo Cluzel se dresse comme",
                    "la voix de sa génération, une génération",
                    "qui, malgré son immersion totale dans",
                    "le digital, ne voit pas ses dangers.",
                    "",
                    "Ce jeune auteur ne se contente pas de",
                    "raconter l'histoire des écrans et des",
                    "réseaux sociaux ; il la vit, la respire.",
                    "",
                    "Dans ce livre, il nous guide à travers",
                    "les méandres d'un monde où les",
                    "notifications dictent nos émotions et",
                    "où les algorithmes nous connaissent",
                    "mieux que nous-mêmes."
                ];

                text.forEach((line, i) => {
                    ctx.fillText(line, canvas.width/2, 640 + i * 80);
                });

                // Signature déplacée tout en bas
                ctx.font = 'bold 72px Arial';
                ctx.fillText('THEO CLUZEL', canvas.width/2, canvas.height - 100);

                return new THREE.CanvasTexture(canvas);
            }

            // Création d'une texture pour le côté avec le titre
            function createSpineTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128;   // Réduit la largeur pour un meilleur rendu
                canvas.height = 2048;  // Garde la même hauteur
                const ctx = canvas.getContext('2d');

                // Activation de l'anticrénelage
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';

                // Fond bleu foncé comme la couverture
                ctx.fillStyle = '#001428';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Configuration du texte
                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Rotation pour écrire verticalement
                ctx.save();
                ctx.translate(canvas.width/2, canvas.height/2);
                ctx.rotate(-Math.PI/2);

                // Titre
                ctx.font = 'bold 100px Arial';
                ctx.fillText('ESCLAVE DIGITAL', 0, 0);

                // Auteur
                ctx.font = 'bold 70px Arial';
                ctx.fillText('THEO CLUZEL', 0, -200);

                ctx.restore();

                return new THREE.CanvasTexture(canvas);
            }

            // Création du livre avec les textures
            const bookGeometry = new THREE.BoxGeometry(5.5, 7.5, 0.4);

            const materials = [
                new THREE.MeshPhongMaterial({ 
                    color: 0xFFFFFF,
                    shininess: 30 
                }), // Droite (pages)
                new THREE.MeshPhongMaterial({ 
                    map: createSpineTexture(),
                    shininess: 30 
                }), // Gauche (dos du livre)
                new THREE.MeshPhongMaterial({ color: 0xFFFFFF, shininess: 30 }), // Haut
                new THREE.MeshPhongMaterial({ color: 0xFFFFFF, shininess: 30 }), // Bas
                new THREE.MeshPhongMaterial({ 
                    map: null,
                    shininess: 30,
                    specular: new THREE.Color(0x444444)
                }), // Avant
                new THREE.MeshPhongMaterial({ 
                    map: createBackTexture(),
                    shininess: 30,
                    specular: new THREE.Color(0x444444)
                })  // Arrière
            ];

            const book = new THREE.Mesh(bookGeometry, materials);
            scene.add(book);

            camera.position.z = 9;

            // Chargement de la texture de couverture
            loadTexture('./images/cover.jpg').then(texture => {
                materials[4].map = texture;
                materials[4].needsUpdate = true;
            }).catch(error => {
                console.error("Erreur lors du chargement de la couverture:", error);
            });

            // Animation et contrôles
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
            let rotationSpeed = { x: 0, y: 0 };
            let autoRotate = true;

            container.addEventListener('mousedown', startRotating);
            container.addEventListener('mousemove', rotate);
            container.addEventListener('mouseup', stopRotating);
            container.addEventListener('mouseleave', stopRotating);
            container.addEventListener('touchstart', startRotating);
            container.addEventListener('touchmove', rotate);
            container.addEventListener('touchend', stopRotating);

            function startRotating(e) {
                isDragging = true;
                autoRotate = false;
                previousMousePosition = {
                    x: e.type === 'mousedown' ? e.clientX : e.touches[0].clientX,
                    y: e.type === 'mousedown' ? e.clientY : e.touches[0].clientY
                };
                rotationSpeed = { x: 0, y: 0 };
            }

            function rotate(e) {
                if (!isDragging) return;
                e.preventDefault();
                
                const currentPosition = {
                    x: e.type === 'mousemove' ? e.clientX : e.touches[0].clientX,
                    y: e.type === 'mousemove' ? e.clientY : e.touches[0].clientY
                };

                rotationSpeed = {
                    x: (currentPosition.y - previousMousePosition.y) * 0.005,
                    y: (currentPosition.x - previousMousePosition.x) * 0.005
                };

                book.rotation.x += rotationSpeed.x;
                book.rotation.y += rotationSpeed.y;

                previousMousePosition = {
                    x: currentPosition.x,
                    y: currentPosition.y
                };
            }

            function stopRotating() {
                isDragging = false;
                rotationSpeed = { x: 0, y: 0 };
                // Ne pas réactiver l'autoRotate
            }

            function animate() {
                requestAnimationFrame(animate);
                
                if (!isDragging) {
                    if (autoRotate) {
                        // Rotation initiale plus lente
                        book.rotation.y += 0.003;
                    }
                } else {
                    // Appliquer la rotation basée sur l'interaction utilisateur
                    book.rotation.x += rotationSpeed.x;
                    book.rotation.y += rotationSpeed.y;
                }
                
                renderer.render(scene, camera);
            }

            // Gestion du redimensionnement
            window.addEventListener('resize', () => {
                camera.aspect = container.offsetWidth / container.offsetHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.offsetWidth, container.offsetHeight);
            });

            animate();
        });

        // Gestion de la sélection du format et du paiement
        const formatForm = document.getElementById('format-form');
        const formatDialog = document.getElementById('format-selection');

        // Gestion de la fermeture de la modale avec Echap
        formatDialog.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                formatDialog.close();
            }
        });

        // Gestion du clic en dehors de la modale
        formatDialog.addEventListener('click', (e) => {
            if (e.target === formatDialog) {
                formatDialog.close();
            }
        });

        formatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const selectedFormat = document.querySelector('input[name="format"]:checked');
            
            if (!selectedFormat) {
                alert('Veuillez sélectionner un format de lecture');
                return;
            }

            // Rediriger directement vers la page d'informations avec le format sélectionné
            window.location.href = `information.html?format=${selectedFormat.value}`;
        });

        // Style pour les radios sélectionnés
        document.querySelectorAll('input[name="format"]').forEach(radio => {
            radio.parentElement.addEventListener('click', function() {
                radio.checked = true;
                // Retirer la mise en évidence de tous les conteneurs
                document.querySelectorAll('input[name="format"]').forEach(r => {
                    r.parentElement.classList.remove('ring-2', 'ring-cyan-400');
                });
                // Ajouter la mise en évidence au conteneur sélectionné
                this.classList.add('ring-2', 'ring-cyan-400');
            });
        });
    </script>
</body>
</html> 